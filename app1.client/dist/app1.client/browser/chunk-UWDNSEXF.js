import{a as Qe}from"./chunk-56XCBBNU.js";import{a as Ue,b as He,c as qe,d as Ge}from"./chunk-4NQDTH66.js";import{a as De,b as Fe,c as Ve,d as te,e as ie}from"./chunk-S2KWTDMG.js";import{a as $e,b as Be,c as Re,d as Ae}from"./chunk-TKBKLS4N.js";import{c as Ee}from"./chunk-ORUTPMOI.js";import{b as ae}from"./chunk-YCUPTL4E.js";import"./chunk-EMSJVJHN.js";import"./chunk-7XX3TVDI.js";import"./chunk-SSJR24MO.js";import"./chunk-6UHTTYRU.js";import{a as Pe,b as ze}from"./chunk-A3WCOMYE.js";import{a as Oe,b as We,d as de,e as _e}from"./chunk-2ZTHJEDW.js";import{d as ne,e as Le,i as oe,j as re}from"./chunk-FEENJMQR.js";import"./chunk-EDL6DMK5.js";import{b as se,g as ce,l as pe,v as je,x as me}from"./chunk-WRLPWSZF.js";import{a as le,c as W,e as P}from"./chunk-22IZ7S6Q.js";import{b as z,c as U}from"./chunk-ZDVCYR6D.js";import{K as Z,L as ee}from"./chunk-25LMPTPI.js";import"./chunk-AUKJIIL4.js";import"./chunk-7DEZWTYC.js";import"./chunk-SVUIAZ5I.js";import{c as Te}from"./chunk-IKG45PLY.js";import{c as Ie}from"./chunk-OYH67EY7.js";import{h as Y,m as O}from"./chunk-DBYYYE4O.js";import{$ as E,Ac as B,Bc as R,C as ve,Cb as h,Ec as K,Fc as X,H as G,J as be,Kb as p,Kc as F,Lc as V,M as we,Mb as J,Pc as Se,Qb as N,Rb as C,Tb as ke,Ub as w,Uc as j,Vb as y,Wb as a,Xb as l,Y as M,Yb as u,Z as A,ac as x,ca as ye,eb as Q,f as S,g as L,gc as f,ha as Ne,hb as r,ib as b,ic as s,m as q,n as he,r as I,s as xe,sc as k,ta as m,tc as g,ua as d,uc as Me,vc as D,wb as T,zc as $}from"./chunk-Q34RPHHW.js";import"./chunk-WWX6BADO.js";var H=(()=>{class t{constructor(e){this._httpClient=e,this._labels=new L(null),this._note=new L(null),this._notes=new L(null)}get labels$(){return this._labels.asObservable()}get notes$(){return this._notes.asObservable()}get note$(){return this._note.asObservable()}getLabels(){return this._httpClient.get("api/apps/notes/labels").pipe(E(e=>{this._labels.next(e)}))}addLabel(e){return this._httpClient.post("api/apps/notes/labels",{title:e}).pipe(E(i=>{this._labels.next(i)}))}updateLabel(e){return this._httpClient.patch("api/apps/notes/labels",{label:e}).pipe(E(i=>{this.getNotes().subscribe(),this._labels.next(i)}))}deleteLabel(e){return this._httpClient.delete("api/apps/notes/labels",{params:{id:e}}).pipe(E(i=>{this.getNotes().subscribe(),this._labels.next(i)}))}getNotes(){return this._httpClient.get("api/apps/notes/all").pipe(E(e=>{this._notes.next(e)}))}getNoteById(e){return this._notes.pipe(be(1),I(i=>{let n=i.find(o=>o.id===e)||null;return this._note.next(n),n}),M(i=>i?q(i):he("Could not found the note with id of "+e+"!")))}addTask(e,i){return this._httpClient.post("api/apps/notes/tasks",{note:e,task:i}).pipe(M(()=>this.getNotes().pipe(M(()=>this.getNoteById(e.id)))))}createNote(e){return this._httpClient.post("api/apps/notes",{note:e}).pipe(M(i=>this.getNotes().pipe(M(()=>this.getNoteById(i.id).pipe(I(()=>i))))))}updateNote(e){let i=ae(e);return i.labels.length&&(i.labels=i.labels.map(n=>n.id)),this._httpClient.patch("api/apps/notes",{updatedNote:i}).pipe(E(n=>{this.getNotes().subscribe()}))}deleteNote(e){return this._httpClient.delete("api/apps/notes",{params:{id:e.id}}).pipe(I(i=>(this.getNotes().subscribe(),i)))}static{this.\u0275fac=function(i){return new(i||t)(Ne(Ie))}}static{this.\u0275prov=ye({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var rt=t=>({"text-secondary line-through":t});function at(t,c){if(t&1){let e=x();a(0,"div",4)(1,"div",13)(2,"button",14),f("click",function(){m(e);let n=s(),o=s();return d(o.removeImage(n))}),u(3,"mat-icon",15),l()(),u(4,"img",16),l()}if(t&2){let e=s();r(3),p("svgIcon","heroicons_outline:trash"),r(),p("src",e.image,Q)}}function lt(t,c){if(t&1){let e=x();a(0,"div",17)(1,"mat-checkbox",21),R("ngModelChange",function(n){let o=m(e).$implicit;return B(o.completed,n)||(o.completed=n),d(n)}),f("change",function(){let n=m(e).$implicit,o=s(2),_=s();return d(_.updateTaskOnNote(o,n))}),l(),a(2,"input",22),R("ngModelChange",function(n){let o=m(e).$implicit;return B(o.content,n)||(o.content=n),d(n)}),f("input",function(){let n=m(e).$implicit,o=s(2),_=s();return d(_.updateTaskOnNote(o,n))}),l(),a(3,"mat-icon",23),f("click",function(){let n=m(e).$implicit,o=s(2),_=s();return d(_.removeTaskFromNote(o,n))}),l()()}if(t&2){let e=c.$implicit;r(),p("color","primary"),$("ngModel",e.completed),r(),p("ngClass",K(6,rt,e.completed))("placeholder","Task"),$("ngModel",e.content),r(),p("svgIcon","heroicons_solid:x-mark")}}function st(t,c){if(t&1){let e=x();a(0,"div",9),w(1,lt,4,8,"div",17,N().trackByFn,!0),a(3,"div",18),u(4,"mat-icon",19),a(5,"input",20,0),f("keydown.enter",function(){m(e);let n=k(6),o=s();return s().addTaskToNote(o,n.value),d(n.value="")}),l()()()}if(t&2){let e=s();r(),y(e.tasks),r(3),p("svgIcon","heroicons_solid:plus"),r(),p("placeholder","Add task")}}function ct(t,c){if(t&1){let e=x();a(0,"div",24)(1,"div"),g(2),l(),a(3,"mat-icon",25),f("click",function(){let n=m(e).$implicit,o=s(2),_=s();return d(_.toggleLabelOnNote(o,n))}),l()()}if(t&2){let e=c.$implicit;r(2),D(" ",e.title," "),r(),p("svgIcon","heroicons_solid:x-circle")}}function pt(t,c){if(t&1&&(a(0,"div",10),w(1,ct,4,2,"div",24,N().trackByFn,!0),l()),t&2){let e=s();r(),y(e.labels)}}function mt(t,c){if(t&1){let e=x();a(0,"div",11)(1,"button",26),f("click",function(){m(e);let n=s(),o=s();return d(o.createNote(n))}),g(2," Save "),l()()}if(t&2){let e=s();r(),p("color","primary")("disabled",!e.title&&!e.content)}}function dt(t,c){if(t&1){let e=x();a(0,"button",34),f("click",function(){let n=m(e).$implicit,o=s(3),_=s();return d(_.toggleLabelOnNote(o,n))}),a(1,"span",18),u(2,"mat-checkbox",35),a(3,"span",36),g(4),l()()()}if(t&2){let e=c.$implicit,i=s(3),n=s();r(2),p("color","primary")("checked",n.isNoteHasLabel(i,e)),r(2),Me(e.title)}}function _t(t,c){t&1&&w(0,dt,5,3,"button",33,ke),t&2&&y(c)}function ut(t,c){if(t&1){let e=x();a(0,"div",12)(1,"div",27)(2,"div")(3,"input",28,1),f("change",function(){m(e);let n=k(4),o=s(),_=s();return d(_.uploadImage(o,n.files))}),l(),a(5,"label",29),u(6,"mat-icon",30),l()(),a(7,"button",14),f("click",function(){m(e);let n=s(),o=s();return d(o.addTasksToNote(n))}),u(8,"mat-icon",30),l(),a(9,"button",31),u(10,"mat-icon",30),l(),a(11,"mat-menu",null,2),h(13,_t,2,0),F(14,"async"),l(),a(15,"button",14),f("click",function(){m(e);let n=s(),o=s();return d(o.toggleArchiveOnNote(n))}),u(16,"mat-icon",30),l(),a(17,"button",14),f("click",function(){m(e);let n=s(),o=s();return d(o.deleteNote(n))}),u(18,"mat-icon",30),l()(),a(19,"button",32),g(20,"Close"),l()()}if(t&2){let e,i=k(12),n=s(2);r(3),p("multiple",!1)("accept","image/jpeg, image/png"),r(3),p("svgIcon","heroicons_outline:photo"),r(2),p("svgIcon","heroicons_outline:clipboard-document-list"),r(),p("matMenuTriggerFor",i),r(),p("svgIcon","heroicons_outline:tag"),r(3),C((e=V(14,9,n.labels$))?13:-1,e),r(3),p("svgIcon","heroicons_outline:archive-box"),r(2),p("svgIcon","heroicons_outline:trash")}}function ft(t,c){if(t&1){let e=x();h(0,at,5,2,"div",4),a(1,"div",5)(2,"div")(3,"input",6),R("ngModelChange",function(n){let o=m(e);return B(o.title,n)||(o.title=n),d(n)}),f("input",function(){let n=m(e),o=s();return d(o.updateNoteDetails(n))}),l()(),a(4,"div",7)(5,"textarea",8),R("ngModelChange",function(n){let o=m(e);return B(o.content,n)||(o.content=n),d(n)}),f("input",function(){let n=m(e),o=s();return d(o.updateNoteDetails(n))}),l()(),h(6,st,7,2,"div",9)(7,pt,3,0,"div",10)(8,mt,3,2,"div",11)(9,ut,21,11,"div",12),l()}if(t&2){let e=c;C(e.image?0:-1),r(3),p("placeholder","Title"),$("ngModel",e.title),r(2),p("placeholder","Note"),$("ngModel",e.content),r(),C(e.tasks?6:-1),r(),C(e.labels&&e.labels.length?7:-1),r(),C(e.id?-1:8),r(),C(e.id?9:-1)}}var Ce=(()=>{class t{constructor(e,i,n,o){this._changeDetectorRef=e,this._data=i,this._notesService=n,this._matDialogRef=o,this.noteChanged=new S,this._unsubscribeAll=new S}ngOnInit(){if(this._data.note.id)this._notesService.getNoteById(this._data.note.id).subscribe(),this.note$=this._notesService.note$;else{let e={id:null,title:"",content:"",tasks:null,image:null,reminder:null,labels:[],archived:!1,createdAt:null,updatedAt:null};this.note$=q(e)}this.labels$=this._notesService.labels$,this.noteChanged.pipe(A(this._unsubscribeAll),G(500),M(e=>this._notesService.updateNote(e))).subscribe(()=>{this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createNote(e){this._notesService.createNote(e).pipe(I(()=>{this.note$=this._notesService.note$})).subscribe()}uploadImage(e,i){if(!i.length)return;let n=["image/jpeg","image/png"],o=i[0];n.includes(o.type)&&this._readAsDataURL(o).then(_=>{e.image=_,this.noteChanged.next(e)})}removeImage(e){e.image=null,this.noteChanged.next(e)}addTasksToNote(e){e.tasks||(e.tasks=[])}addTaskToNote(e,i){i.trim()!==""&&this._notesService.addTask(e,i).subscribe()}removeTaskFromNote(e,i){e.tasks=e.tasks.filter(n=>n.id!==i.id),this.noteChanged.next(e)}updateTaskOnNote(e,i){i.id&&this.noteChanged.next(e)}isNoteHasLabel(e,i){return!!e.labels.find(n=>n.id===i.id)}toggleLabelOnNote(e,i){this.isNoteHasLabel(e,i)?e.labels=e.labels.filter(n=>n.id!==i.id):e.labels.push(i),this.noteChanged.next(e)}toggleArchiveOnNote(e){e.archived=!e.archived,this.noteChanged.next(e),this._matDialogRef.close()}updateNoteDetails(e){this.noteChanged.next(e)}deleteNote(e){this._notesService.deleteNote(e).subscribe(i=>{i&&this._matDialogRef.close()})}trackByFn(e,i){return i.id||e}_readAsDataURL(e){return new Promise((i,n)=>{let o=new FileReader;o.onload=()=>{i(o.result)},o.onerror=_=>{n(_)},o.readAsDataURL(e)})}static{this.\u0275fac=function(i){return new(i||t)(b(j),b(Fe),b(H),b(De))}}static{this.\u0275cmp=T({type:t,selectors:[["notes-details"]],decls:3,vars:3,consts:[["newTaskInput",""],["imageFileInput",""],["labelsMenu","matMenu"],[1,"-m-6","flex","flex-auto","flex-col","md:w-160","md:min-w-160"],[1,"relative","w-full"],[1,"m-4"],[1,"w-full","p-2","text-2xl",3,"ngModelChange","input","placeholder","ngModel"],[1,"flex","w-full","px-2","py-5"],["cdkTextareaAutosize","",1,"w-full",3,"ngModelChange","input","placeholder","ngModel"],[1,"mx-2","mt-4","space-y-1.5"],[1,"mx-1","mt-6","flex","flex-wrap","items-center"],[1,"mt-4","flex","items-center","justify-end"],[1,"mt-4","flex","items-center","justify-between"],[1,"absolute","bottom-0","right-0","p-4"],["mat-icon-button","",3,"click"],[1,"text-white",3,"svgIcon"],[1,"w-full","object-cover",3,"src"],[1,"group","flex","items-center"],[1,"flex","items-center"],[1,"text-hint","-ml-0.5","icon-size-5",3,"svgIcon"],[1,"ml-1.5","w-full","px-1","py-0.5",3,"keydown.enter","placeholder"],[1,"flex","items-center",3,"ngModelChange","change","color","ngModel"],[1,"w-full","px-1","py-0.5",3,"ngModelChange","input","ngClass","placeholder","ngModel"],[1,"ml-auto","hidden","cursor-pointer","icon-size-5","group-hover:flex",3,"click","svgIcon"],[1,"m-1","flex","items-center","rounded-full","bg-gray-100","px-3","py-0.5","text-sm","font-medium","text-gray-500","dark:bg-gray-700","dark:text-gray-300"],[1,"ml-1","cursor-pointer","icon-size-4",3,"click","svgIcon"],["mat-flat-button","",3,"click","color","disabled"],[1,"flex","items-center","space-x-2"],["id","image-file-input","type","file",1,"pointer-events-none","invisible","absolute","h-0","w-0","opacity-0",3,"change","multiple","accept"],["for","image-file-input","matRipple","",1,"flex","h-10","w-10","cursor-pointer","items-center","justify-center","rounded-full","hover:bg-gray-400","hover:bg-opacity-20","dark:hover:bg-black","dark:hover:bg-opacity-5"],[3,"svgIcon"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-flat-button","","matDialogClose",""],["mat-menu-item",""],["mat-menu-item","",3,"click"],["disableRipple","",1,"pointer-events-none","flex","items-center",3,"color","checked"],[1,"ml-1","leading-5"]],template:function(i,n){if(i&1&&(a(0,"div",3),h(1,ft,10,9),F(2,"async"),l()),i&2){let o;r(),C((o=V(2,1,n.note$))?1:-1,o)}},dependencies:[P,le,W,U,z,me,se,ce,pe,We,Oe,ze,Pe,Y,ee,Z,Ae,Be,$e,Re,ie,te,O],encapsulation:2,changeDetection:0})}}return t})();function ht(t,c){if(t&1){let e=x();a(0,"mat-form-field",11)(1,"button",12),f("click",function(){let n=m(e).$implicit,o=s(2);return d(o.deleteLabel(n.id))}),u(2,"mat-icon",9),l(),a(3,"input",13),R("ngModelChange",function(n){let o=m(e).$implicit;return B(o.title,n)||(o.title=n),d(n)}),f("input",function(){let n=m(e).$implicit,o=s(2);return d(o.updateLabel(n))}),l()()}if(t&2){let e=c.$implicit;r(2),p("svgIcon","heroicons_solid:trash"),r(),p("autocomplete","off"),$("ngModel",e.title)}}function xt(t,c){t&1&&w(0,ht,4,3,"mat-form-field",11,N().trackByFn,!0),t&2&&y(c)}var Ye=(()=>{class t{constructor(e,i){this._changeDetectorRef=e,this._notesService=i,this.labelChanged=new S,this._unsubscribeAll=new S}ngOnInit(){this.labels$=this._notesService.labels$,this.labelChanged.pipe(A(this._unsubscribeAll),G(500),ve(e=>e.title.trim()!==""),M(e=>this._notesService.updateLabel(e))).subscribe(()=>{this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addLabel(e){this._notesService.addLabel(e).subscribe()}updateLabel(e){this.labelChanged.next(e)}deleteLabel(e){this._notesService.deleteLabel(e).subscribe(()=>{this._changeDetectorRef.markForCheck()})}trackByFn(e,i){return i.id||e}static{this.\u0275fac=function(i){return new(i||t)(b(j),b(H))}}static{this.\u0275cmp=T({type:t,selectors:[["notes-labels"]],decls:14,vars:9,consts:[["newLabelInput",""],[1,"flex","w-80","min-w-80","flex-auto","flex-col","p-2","md:p-4"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-semibold"],["matDialogClose","","mat-icon-button",""],[3,"svgIcon"],[1,"fuse-mat-dense","mt-8","w-full"],["name","new-label","matInput","",3,"autocomplete","placeholder"],["mat-icon-button","","matSuffix","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"mt-4","flex","flex-col"],[1,"fuse-mat-dense","w-full"],["mat-icon-button","","matPrefix","",3,"click"],["required","","matInput","",3,"ngModelChange","input","autocomplete","ngModel"]],template:function(i,n){if(i&1){let o=x();a(0,"div",1)(1,"div",2)(2,"div",3),g(3,"Edit labels"),l(),a(4,"button",4),u(5,"mat-icon",5),l()(),a(6,"mat-form-field",6),u(7,"input",7,0),a(9,"button",8),f("click",function(){m(o);let v=k(8);return n.addLabel(v.value),d(v.value="")}),u(10,"mat-icon",9),l()(),a(11,"div",10),h(12,xt,2,0),F(13,"async"),l()()}if(i&2){let o,_=k(8);r(5),p("svgIcon","heroicons_outline:x-mark"),r(2),p("autocomplete","off")("placeholder","Create new label"),r(2),J("invisible",_.value.trim()===""),r(),p("svgIcon","heroicons_solid:check-circle"),r(2),C((o=V(13,7,n.labels$))?12:-1,o)}},dependencies:[P,W,ie,te,U,z,re,oe,ne,Le,_e,de,me,se,ce,je,pe,O],encapsulation:2,changeDetection:0})}}return t})();var ge=(t,c)=>({"bg-gray-200 text-primary dark:bg-gray-700 dark:text-primary-400":t,"text-hint hover:bg-hover":c}),vt=t=>({"text-secondary line-through":t});function bt(t,c){if(t&1){let e=x();a(0,"div",8),f("click",function(){let n=m(e).$implicit,o=s(2);return d(o.filterByLabel(n.id))}),u(1,"mat-icon",9),a(2,"div",10),g(3),l()()}if(t&2){let e=c.$implicit,i=s(2);p("ngClass",X(4,ge,"label:"+e.id===i.filterStatus,"label:"+e.id!==i.filterStatus))("matRippleDisabled","label:"+e.id===i.filterStatus),r(),p("svgIcon","heroicons_outline:tag"),r(2),D(" ",e.title," ")}}function wt(t,c){t&1&&w(0,bt,4,7,"div",27,N().trackByFn,!0),t&2&&y(c)}function yt(t,c){if(t&1&&u(0,"img",32),t&2){let e=s().$implicit;p("src",e.image,Q)}}function Nt(t,c){if(t&1&&(a(0,"div",34),g(1),l()),t&2){let e=s().$implicit;r(),D(" ",e.title," ")}}function kt(t,c){if(t&1&&(a(0,"div"),g(1),l()),t&2){let e=s().$implicit;J("text-xl",e.content.length<70),r(),D(" ",e.content," ")}}function Mt(t,c){t&1&&(a(0,"div",38),u(1,"div",41),l())}function St(t,c){t&1&&u(0,"mat-icon",39),t&2&&p("svgIcon","heroicons_solid:check-circle")}function It(t,c){if(t&1&&(a(0,"div",16),h(1,Mt,2,0,"div",38)(2,St,1,1,"mat-icon",39),a(3,"div",40),g(4),l()()),t&2){let e=c.$implicit;r(),C(e.completed?-1:1),r(),C(e.completed?2:-1),r(),p("ngClass",K(4,vt,e.completed)),r(),D(" ",e.content," ")}}function Tt(t,c){if(t&1&&(a(0,"div",36),w(1,It,5,6,"div",16,N().trackByFn,!0),l()),t&2){let e=s().$implicit;r(),y(e.tasks)}}function Dt(t,c){if(t&1&&(a(0,"div",42),g(1),l()),t&2){let e=c.$implicit;r(),D(" ",e.title," ")}}function Ft(t,c){if(t&1&&(a(0,"div",37),w(1,Dt,2,1,"div",42,N().trackByFn,!0),l()),t&2){let e=s().$implicit;r(),y(e.labels)}}function Vt(t,c){if(t&1){let e=x();a(0,"div",31),f("click",function(){let n=m(e).$implicit,o=s(5);return d(o.openNoteDialog(n))}),h(1,yt,1,1,"img",32),a(2,"div",33),h(3,Nt,2,1,"div",34)(4,kt,2,3,"div",35)(5,Tt,3,0,"div",36)(6,Ft,3,0,"div",37),l()()}if(t&2){let e=c.$implicit;r(),C(e.image?1:-1),r(2),C(e.title?3:-1),r(),C(e.content?4:-1),r(),C(e.tasks?5:-1),r(),C(e.labels?6:-1)}}function Lt(t,c){if(t&1&&(a(0,"div",29),w(1,Vt,7,5,"div",30,N().trackByFn,!0),l()),t&2){let e=c.$implicit;r(),y(e.items)}}function Et(t,c){if(t&1&&w(0,Lt,3,0,"div",29,N().trackByFn,!0),t&2){let e=c.$implicit;y(e)}}function $t(t,c){if(t&1&&(a(0,"fuse-masonry",28),h(1,Et,2,0,"ng-template",null,2,Se),l()),t&2){let e=k(2),i=s(),n=s();p("items",i)("columns",n.masonryColumns)("columnsTemplate",e)}}function Bt(t,c){t&1&&(a(0,"div",26),u(1,"mat-icon",43),a(2,"div",44),g(3," There are no notes! "),l()()),t&2&&(r(),p("svgIcon","heroicons_outline:document"))}function Rt(t,c){t&1&&h(0,$t,3,3,"fuse-masonry",28)(1,Bt,4,1,"div",26),t&2&&C(c.length?0:1)}function At(t,c){t&1&&(a(0,"div",26)(1,"div",44),g(2," Loading... "),l()())}var Ze=(()=>{class t{constructor(e,i,n,o){this._changeDetectorRef=e,this._fuseMediaWatcherService=i,this._matDialog=n,this._notesService=o,this.drawerMode="side",this.drawerOpened=!0,this.filter$=new L("notes"),this.searchQuery$=new L(null),this.masonryColumns=4,this._unsubscribeAll=new S}get filterStatus(){return this.filter$.value}ngOnInit(){this._notesService.getLabels().subscribe(),this._notesService.getNotes().subscribe(),this.labels$=this._notesService.labels$,this.notes$=xe([this._notesService.notes$,this.filter$,this.searchQuery$]).pipe(we(),I(([e,i,n])=>{if(!e||!e.length)return;let o=e;n&&(n=n.trim().toLowerCase(),o=o.filter(v=>v.title.toLowerCase().includes(n)||v.content.toLowerCase().includes(n)));let _=i==="archived";if(o=o.filter(v=>v.archived===_),i.startsWith("label:")){let v=i.split(":")[1];o=o.filter(tt=>!!tt.labels.find(it=>it.id===v))}return o})),this._fuseMediaWatcherService.onMediaChange$.pipe(A(this._unsubscribeAll)).subscribe(({matchingAliases:e})=>{e.includes("lg")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1),e.includes("xl")?this.masonryColumns=5:e.includes("lg")?this.masonryColumns=4:e.includes("md")?this.masonryColumns=3:e.includes("sm")?this.masonryColumns=2:this.masonryColumns=1,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addNewNote(){this._matDialog.open(Ce,{autoFocus:!1,data:{note:{}}})}openEditLabelsDialog(){this._matDialog.open(Ye,{autoFocus:!1})}openNoteDialog(e){this._matDialog.open(Ce,{autoFocus:!1,data:{note:ae(e)}})}filterByArchived(){this.filter$.next("archived")}filterByLabel(e){let i=`label:${e}`;this.filter$.next(i)}filterByQuery(e){this.searchQuery$.next(e)}resetFilter(){this.filter$.next("notes")}trackByFn(e,i){return i.id||e}static{this.\u0275fac=function(i){return new(i||t)(b(j),b(Ee),b(Ve),b(H))}}static{this.\u0275cmp=T({type:t,selectors:[["notes-list"]],decls:37,vars:28,consts:[["drawer",""],["searchInput",""],["columnsTemplate",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden"],[1,"bg-card","h-full","flex-auto","dark:bg-transparent"],[1,"bg-default","w-2/3","border-r-0","sm:w-72","lg:w-56",3,"mode","opened"],[1,"p-6","lg:py-8","lg:pl-4","lg:pr-0"],[1,"space-y-2"],["matRipple","",1,"relative","flex","cursor-pointer","items-center","rounded-full","px-4","py-2","font-medium",3,"click","ngClass","matRippleDisabled"],[1,"text-current",3,"svgIcon"],[1,"text-default","ml-3","select-none","leading-5"],["matRipple","",1,"relative","flex","cursor-pointer","items-center","rounded-full","px-4","py-2","font-medium","hover:bg-hover",3,"click"],[1,"text-hint",3,"svgIcon"],[1,"ml-3","select-none","leading-5"],[1,"flex","flex-col","bg-gray-100","dark:bg-transparent"],[1,"flex","flex-auto","flex-col","p-6","md:p-8"],[1,"flex","items-center"],[1,"flex","flex-auto","items-center"],["mat-icon-button","",1,"-ml-2","flex","lg:hidden",3,"click"],[3,"svgIcon"],[1,"fuse-mat-rounded","fuse-mat-dense","ml-4","flex-auto","lg:ml-0",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"input","autocomplete","placeholder"],["mat-flat-button","",1,"ml-4","min-w-10","px-1","sm:px-4",3,"click","color"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2","hidden","sm:inline-block"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],["matRipple","",1,"relative","flex","cursor-pointer","items-center","rounded-full","px-4","py-2","font-medium",3,"ngClass","matRippleDisabled"],[1,"-mx-2","mt-8",3,"items","columns","columnsTemplate"],[1,"flex-1","space-y-4","px-2"],[1,"bg-card","flex","cursor-pointer","flex-col","overflow-hidden","rounded-2xl","shadow"],[1,"bg-card","flex","cursor-pointer","flex-col","overflow-hidden","rounded-2xl","shadow",3,"click"],[1,"w-full","object-cover",3,"src"],[1,"flex","flex-auto","flex-col","space-y-4","p-6"],[1,"line-clamp-3","font-semibold"],[3,"text-xl"],[1,"space-y-1.5"],[1,"-m-1","flex","flex-wrap","items-center"],[1,"flex","h-5","w-5","items-center","justify-center"],[1,"text-hint","icon-size-5",3,"svgIcon"],[1,"ml-1.5","leading-5",3,"ngClass"],[1,"h-4","w-4","rounded-full","border-2"],[1,"m-1","rounded-full","bg-gray-100","px-3","py-0.5","text-sm","font-medium","text-gray-500","dark:bg-gray-700","dark:text-gray-300"],[1,"icon-size-24",3,"svgIcon"],[1,"text-secondary","mt-4","text-2xl","font-semibold","tracking-tight"]],template:function(i,n){if(i&1){let o=x();a(0,"div",3)(1,"mat-drawer-container",4)(2,"mat-drawer",5,0)(4,"div",6)(5,"div",7)(6,"div",8),f("click",function(){return m(o),d(n.resetFilter())}),u(7,"mat-icon",9),a(8,"div",10),g(9," Notes "),l()(),a(10,"div",8),f("click",function(){return m(o),d(n.filterByArchived())}),u(11,"mat-icon",9),a(12,"div",10),g(13," Archive "),l()(),h(14,wt,2,0),F(15,"async"),a(16,"div",11),f("click",function(){return m(o),d(n.openEditLabelsDialog())}),u(17,"mat-icon",12),a(18,"div",13),g(19," Edit labels "),l()()()()(),a(20,"mat-drawer-content",14)(21,"div",15)(22,"div",16)(23,"div",17)(24,"button",18),f("click",function(){m(o);let v=k(3);return d(v.toggle())}),u(25,"mat-icon",19),l(),a(26,"mat-form-field",20),u(27,"mat-icon",21),a(28,"input",22,1),f("input",function(){m(o);let v=k(29);return d(n.filterByQuery(v.value))}),l()()(),a(30,"button",23),f("click",function(){return m(o),d(n.addNewNote())}),u(31,"mat-icon",24),a(32,"span",25),g(33,"New note"),l()()(),h(34,Rt,2,1),F(35,"async"),h(36,At,3,0,"div",26),l()()()()}if(i&2){let o,_;r(2),p("mode",n.drawerMode)("opened",n.drawerOpened),r(4),p("ngClass",X(22,ge,n.filterStatus==="notes",n.filterStatus!=="notes"))("matRippleDisabled",n.filterStatus==="notes"),r(),p("svgIcon","heroicons_outline:pencil-square"),r(3),p("ngClass",X(25,ge,n.filterStatus==="archived",n.filterStatus!=="archived"))("matRippleDisabled",n.filterStatus==="archived"),r(),p("svgIcon","heroicons_outline:archive-box"),r(3),C((o=V(15,18,n.labels$))?14:-1,o),r(3),p("svgIcon","heroicons_outline:pencil"),r(8),p("svgIcon","heroicons_outline:bars-3"),r(),p("subscriptSizing","dynamic"),r(),p("svgIcon","heroicons_solid:magnifying-glass"),r(),p("autocomplete","off")("placeholder","Search notes"),r(2),p("color","primary"),r(),p("svgIcon","heroicons_solid:plus-circle"),r(3),C((_=V(35,20,n.notes$))?34:36,_)}},dependencies:[Ge,He,qe,Ue,ee,Z,Y,U,z,P,le,W,re,oe,ne,_e,de,Qe,O],encapsulation:2,changeDetection:0})}}return t})();var et=(()=>{class t{constructor(){}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=T({type:t,selectors:[["notes"]],decls:1,vars:0,template:function(i,n){i&1&&u(0,"router-outlet")},dependencies:[Te],encapsulation:2,changeDetection:0})}}return t})();var Di=[{path:"",component:et,children:[{path:"",component:Ze}]}];export{Di as default};
